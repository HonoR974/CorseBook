{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\WorkSpace\\\\DepotGithub\\\\P12\\\\P12\\\\angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/upload-s3.service\";\nimport * as i2 from \"ngx-toastr\";\n\nfunction UploadFileComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r4, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction UploadFileComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelementStart(1, \"h1\");\n    i0.ɵɵtext(2, \"NO CONTENT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UploadFileComponent_ngx_dropzone_image_preview_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"ngx-dropzone-image-preview\", 9);\n    i0.ɵɵlistener(\"removed\", function UploadFileComponent_ngx_dropzone_image_preview_9_Template_ngx_dropzone_image_preview_removed_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const f_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onRemove(f_r5);\n    });\n    i0.ɵɵelementStart(1, \"ngx-dropzone-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const f_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"file\", f_r5)(\"removable\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", f_r5.name, \" (\", f_r5.type, \")\");\n  }\n}\n\nfunction UploadFileComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const file_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", file_r8.name);\n    i0.ɵɵproperty(\"src\", file_r8.url, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class UploadFileComponent {\n  constructor(uploadS3Service, toaster) {\n    this.uploadS3Service = uploadS3Service;\n    this.toaster = toaster;\n    this.title = 's3-img-upload';\n    this.files = [];\n    this.filesAPi = [];\n    this.renderImages = [];\n    this.cheminImage = \"https://testp12.s3.eu-west-3.amazonaws.com/images/\";\n  }\n\n  ngOnInit() {\n    //get liste fileAPI \n    this.getAllFileAPI();\n  }\n\n  getAllFileAPI() {\n    this.uploadS3Service.getAllFileAPI().subscribe(data => {\n      this.filesAPi = data;\n    });\n  }\n\n  onSelect(event) {\n    this.files.push(...event.addedFiles);\n  }\n\n  onRemove(event) {\n    this.files.splice(this.files.indexOf(event), 1);\n  }\n\n  onImageUpdate() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.files.length < 1) {\n        _this.toaster.error('Please Select Drop your Image first');\n\n        return;\n      }\n\n      for (let i = 0; i < _this.files.length; i += 1) {\n        let file = _this.files[i];\n        let filePath = 'images/' + file.name; // to create unique name for avoiding being replaced\n\n        let name = file.name;\n\n        try {\n          //s3\n          let response = yield _this.uploadS3Service.uploadFileS3(file, filePath);\n          console.log(response);\n\n          _this.toaster.success(file.name + 'uploaded Successfully :)');\n\n          const url = response.Location;\n\n          _this.renderImages.push(url);\n        } catch (error) {\n          _this.toaster.error('Something went wrong! ');\n        }\n      }\n\n      _this.files = [];\n    })();\n  }\n\n}\n\nUploadFileComponent.ɵfac = function UploadFileComponent_Factory(t) {\n  return new (t || UploadFileComponent)(i0.ɵɵdirectiveInject(i1.UploadS3Service), i0.ɵɵdirectiveInject(i2.ToastrService));\n};\n\nUploadFileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UploadFileComponent,\n  selectors: [[\"app-upload-file\"]],\n  decls: 13,\n  vars: 5,\n  consts: [[1, \"card-container\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"blog-card blog-card-no-image\", 4, \"ngIf\"], [\"ngx-dropzone\", \"\", 1, \"custom-dropzone\", 3, \"accept\", \"change\"], [\"ngProjectAs\", \"ngx-dropzone-preview\", 5, [\"ngx-dropzone-preview\"], 3, \"file\", \"removable\", \"removed\", 4, \"ngFor\", \"ngForOf\"], [1, \"purple\", 3, \"click\"], [1, \"blog-card\"], [\"alt\", \"\", 3, \"src\"], [1, \"blog-card\", \"blog-card-no-image\"], [\"ngProjectAs\", \"ngx-dropzone-preview\", 5, [\"ngx-dropzone-preview\"], 3, \"file\", \"removable\", \"removed\"], [3, \"src\", \"alt\"]],\n  template: function UploadFileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\");\n      i0.ɵɵelementStart(1, \"div\", 0);\n      i0.ɵɵtemplate(2, UploadFileComponent_ng_container_2_Template, 3, 1, \"ng-container\", 1);\n      i0.ɵɵtemplate(3, UploadFileComponent_div_3_Template, 3, 0, \"div\", 2);\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵlistener(\"change\", function UploadFileComponent_Template_div_change_4_listener($event) {\n        return ctx.onSelect($event);\n      });\n      i0.ɵɵelementStart(5, \"ngx-dropzone-label\");\n      i0.ɵɵelementStart(6, \"div\");\n      i0.ɵɵelementStart(7, \"h2\");\n      i0.ɵɵtext(8, \"Try me! Just a Click away :)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, UploadFileComponent_ngx_dropzone_image_preview_9_Template, 3, 4, \"ngx-dropzone-image-preview\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function UploadFileComponent_Template_button_click_10_listener() {\n        return ctx.onImageUpdate();\n      });\n      i0.ɵɵtext(11, \"Upload\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, UploadFileComponent_div_12_Template, 2, 2, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.renderImages);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.renderImages.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"accept\", \"image/*\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.files);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filesAPi);\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGxvYWQtZmlsZS5jb21wb25lbnQuY3NzIn0= */\"]\n});","map":{"version":3,"sources":["D:/WorkSpace/DepotGithub/P12/P12/angular/src/app/_components/upload-file/upload-file.component.ts"],"names":["i0","i1","i2","UploadFileComponent_ng_container_2_Template","rf","ctx","ɵɵelementContainerStart","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵelementContainerEnd","item_r4","$implicit","ɵɵadvance","ɵɵproperty","ɵɵsanitizeUrl","UploadFileComponent_div_3_Template","ɵɵtext","UploadFileComponent_ngx_dropzone_image_preview_9_Template","_r7","ɵɵgetCurrentView","ɵɵlistener","UploadFileComponent_ngx_dropzone_image_preview_9_Template_ngx_dropzone_image_preview_removed_0_listener","restoredCtx","ɵɵrestoreView","f_r5","ctx_r6","ɵɵnextContext","onRemove","ɵɵtextInterpolate2","name","type","UploadFileComponent_div_12_Template","file_r8","ɵɵpropertyInterpolate","url","UploadFileComponent","constructor","uploadS3Service","toaster","title","files","filesAPi","renderImages","cheminImage","ngOnInit","getAllFileAPI","subscribe","data","onSelect","event","push","addedFiles","splice","indexOf","onImageUpdate","length","error","i","file","filePath","response","uploadFileS3","console","log","success","Location","ɵfac","UploadFileComponent_Factory","t","ɵɵdirectiveInject","UploadS3Service","ToastrService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","UploadFileComponent_Template","ɵɵtemplate","UploadFileComponent_Template_div_change_4_listener","$event","UploadFileComponent_Template_button_click_10_listener","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/_services/upload-s3.service\";\r\nimport * as i2 from \"ngx-toastr\";\r\nfunction UploadFileComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"div\", 6);\r\n    i0.ɵɵelement(2, \"img\", 7);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const item_r4 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"src\", item_r4, i0.ɵɵsanitizeUrl);\r\n} }\r\nfunction UploadFileComponent_div_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 8);\r\n    i0.ɵɵelementStart(1, \"h1\");\r\n    i0.ɵɵtext(2, \"NO CONTENT\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction UploadFileComponent_ngx_dropzone_image_preview_9_Template(rf, ctx) { if (rf & 1) {\r\n    const _r7 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"ngx-dropzone-image-preview\", 9);\r\n    i0.ɵɵlistener(\"removed\", function UploadFileComponent_ngx_dropzone_image_preview_9_Template_ngx_dropzone_image_preview_removed_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r7); const f_r5 = restoredCtx.$implicit; const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.onRemove(f_r5); });\r\n    i0.ɵɵelementStart(1, \"ngx-dropzone-label\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const f_r5 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"file\", f_r5)(\"removable\", true);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate2(\"\", f_r5.name, \" (\", f_r5.type, \")\");\r\n} }\r\nfunction UploadFileComponent_div_12_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelement(1, \"img\", 10);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const file_r8 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵpropertyInterpolate(\"alt\", file_r8.name);\r\n    i0.ɵɵproperty(\"src\", file_r8.url, i0.ɵɵsanitizeUrl);\r\n} }\r\nexport class UploadFileComponent {\r\n    constructor(uploadS3Service, toaster) {\r\n        this.uploadS3Service = uploadS3Service;\r\n        this.toaster = toaster;\r\n        this.title = 's3-img-upload';\r\n        this.files = [];\r\n        this.filesAPi = [];\r\n        this.renderImages = [];\r\n        this.cheminImage = \"https://testp12.s3.eu-west-3.amazonaws.com/images/\";\r\n    }\r\n    ngOnInit() {\r\n        //get liste fileAPI \r\n        this.getAllFileAPI();\r\n    }\r\n    getAllFileAPI() {\r\n        this.uploadS3Service.getAllFileAPI().subscribe(data => {\r\n            this.filesAPi = data;\r\n        });\r\n    }\r\n    onSelect(event) {\r\n        this.files.push(...event.addedFiles);\r\n    }\r\n    onRemove(event) {\r\n        this.files.splice(this.files.indexOf(event), 1);\r\n    }\r\n    async onImageUpdate() {\r\n        if (this.files.length < 1) {\r\n            this.toaster.error('Please Select Drop your Image first');\r\n            return;\r\n        }\r\n        for (let i = 0; i < this.files.length; i += 1) {\r\n            let file = this.files[i];\r\n            let filePath = 'images/' + file.name; // to create unique name for avoiding being replaced\r\n            let name = file.name;\r\n            try {\r\n                //s3\r\n                let response = await this.uploadS3Service.uploadFileS3(file, filePath);\r\n                console.log(response);\r\n                this.toaster.success(file.name + 'uploaded Successfully :)');\r\n                const url = response.Location;\r\n                this.renderImages.push(url);\r\n            }\r\n            catch (error) {\r\n                this.toaster.error('Something went wrong! ');\r\n            }\r\n        }\r\n        this.files = [];\r\n    }\r\n}\r\nUploadFileComponent.ɵfac = function UploadFileComponent_Factory(t) { return new (t || UploadFileComponent)(i0.ɵɵdirectiveInject(i1.UploadS3Service), i0.ɵɵdirectiveInject(i2.ToastrService)); };\r\nUploadFileComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: UploadFileComponent, selectors: [[\"app-upload-file\"]], decls: 13, vars: 5, consts: [[1, \"card-container\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"blog-card blog-card-no-image\", 4, \"ngIf\"], [\"ngx-dropzone\", \"\", 1, \"custom-dropzone\", 3, \"accept\", \"change\"], [\"ngProjectAs\", \"ngx-dropzone-preview\", 5, [\"ngx-dropzone-preview\"], 3, \"file\", \"removable\", \"removed\", 4, \"ngFor\", \"ngForOf\"], [1, \"purple\", 3, \"click\"], [1, \"blog-card\"], [\"alt\", \"\", 3, \"src\"], [1, \"blog-card\", \"blog-card-no-image\"], [\"ngProjectAs\", \"ngx-dropzone-preview\", 5, [\"ngx-dropzone-preview\"], 3, \"file\", \"removable\", \"removed\"], [3, \"src\", \"alt\"]], template: function UploadFileComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"section\");\r\n        i0.ɵɵelementStart(1, \"div\", 0);\r\n        i0.ɵɵtemplate(2, UploadFileComponent_ng_container_2_Template, 3, 1, \"ng-container\", 1);\r\n        i0.ɵɵtemplate(3, UploadFileComponent_div_3_Template, 3, 0, \"div\", 2);\r\n        i0.ɵɵelementStart(4, \"div\", 3);\r\n        i0.ɵɵlistener(\"change\", function UploadFileComponent_Template_div_change_4_listener($event) { return ctx.onSelect($event); });\r\n        i0.ɵɵelementStart(5, \"ngx-dropzone-label\");\r\n        i0.ɵɵelementStart(6, \"div\");\r\n        i0.ɵɵelementStart(7, \"h2\");\r\n        i0.ɵɵtext(8, \"Try me! Just a Click away :)\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(9, UploadFileComponent_ngx_dropzone_image_preview_9_Template, 3, 4, \"ngx-dropzone-image-preview\", 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(10, \"button\", 5);\r\n        i0.ɵɵlistener(\"click\", function UploadFileComponent_Template_button_click_10_listener() { return ctx.onImageUpdate(); });\r\n        i0.ɵɵtext(11, \"Upload\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(12, UploadFileComponent_div_12_Template, 2, 2, \"div\", 1);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.renderImages);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.renderImages.length == 0);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"accept\", \"image/*\");\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.files);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.filesAPi);\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1cGxvYWQtZmlsZS5jb21wb25lbnQuY3NzIn0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}